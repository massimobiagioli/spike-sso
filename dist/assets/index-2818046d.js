import{G as U,a as F,w as h,V as M,n as z,K as b,H,d as Q,_,U as V,C as N,R as Y,c as D,A as B,k as X,g as Z,e as k}from"./core.min-1624fbb4.js";const L=e=>({href:e.toString(),pathname:e.pathname,hash:e.hash,search:e.search,query:Object.fromEntries(e.searchParams.entries())}),ee=e=>({origin:e.origin,host:e.host,hostname:e.hostname,port:e.port,protocol:e.protocol,username:"",password:"",searchParams:e.searchParams,toString:e.toString,toJSON:e.toJSON,...L(e)}),W=(e,n)=>{Object.assign(e,n)};function te(e){Q("popstate",h(n=>{const[t]=_(),a=n.state;W(t,a)},"listenToRouteChanges_useOnWindow_F0DUFoKi3wY",[e]))}const I=U("com.dannyfranca.route.store"),G=U("com.dannyfranca.route.navigate"),ne=U("com.dannyfranca.route.params"),J=(e,n)=>{const t=new URL(n,e);return L(t)},re=()=>{if(typeof window<"u")return window},K=()=>{var e;return(e=re())==null?void 0:e.history};function ae(e,n){var a;const t=J(e.origin,n);(a=K())==null||a.pushState(t,"",n),W(e,t)}const pe=e=>{const n=new URL(e),t=F({...ee(n),toString:h(()=>"","initRouter_routeStore_useStore_c4pkMhQOGUo"),toJSON:h(()=>"","initRouter_routeStore_useStore_1_MGs02Ffz4mQ")});M(h(()=>{const[o]=_();o.toString=h(()=>{const[r]=_();return r.href},"initRouter_useTask_1_trPMfEEb7qs",[o]),o.toJSON=h(()=>{const[r]=_();return r.href},"initRouter_useTask_2_Y8NzEGqTA3g",[o])},"initRouter_useTask_t7KmvfculaU",[t])),M(h(({track:o})=>{const[r]=_();o(()=>r.search),r.searchParams=new URLSearchParams(r.search)},"initRouter_useTask_3_UdbBBnW2ydY",[t])),z(h(()=>{var i;const[o]=_(),r=J(o.origin,o.href);(i=K())==null||i.replaceState(r,"",o.href)},"initRouter_useVisibleTask_zbTrRiSjKMc",[t]));const a=h(async o=>{const[r]=_();return ae(r,o)},"initRouter_goTo_d8kr6voNyTU",[t]);return b(I,t),b(G,a),te(t),t},$=()=>D(I),oe=()=>D(G),ge=H(h(e=>{const n=$(),t=oe(),a=B(e,["href","class","activeClassName"]),o=n.pathname===e.href;return X("a",{...a,children:N(k,null,3,"wQ_0"),class:(o?e.activeClassName??"link--active":"")+" "+(e.class??""),onClick$:h(()=>{const[r,i]=_();return r(i.href)},"Link_component_a_onClick_q1nX3Wew00g",[t,e])},{href:Z(r=>r.href,[e],"p0.href"),"preventdefault:click":!0},0,"wQ_1")},"Link_component_P8Mmn5Hyam4"));function ie(e){for(var n=[],t=0;t<e.length;){var a=e[t];if(a==="*"||a==="+"||a==="?"){n.push({type:"MODIFIER",index:t,value:e[t++]});continue}if(a==="\\"){n.push({type:"ESCAPED_CHAR",index:t++,value:e[t++]});continue}if(a==="{"){n.push({type:"OPEN",index:t,value:e[t++]});continue}if(a==="}"){n.push({type:"CLOSE",index:t,value:e[t++]});continue}if(a===":"){for(var o="",r=t+1;r<e.length;){var i=e.charCodeAt(r);if(i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122||i===95){o+=e[r++];continue}break}if(!o)throw new TypeError("Missing parameter name at ".concat(t));n.push({type:"NAME",index:t,value:o}),t=r;continue}if(a==="("){var m=1,f="",r=t+1;if(e[r]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(r));for(;r<e.length;){if(e[r]==="\\"){f+=e[r++]+e[r++];continue}if(e[r]===")"){if(m--,m===0){r++;break}}else if(e[r]==="("&&(m++,e[r+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(r));f+=e[r++]}if(m)throw new TypeError("Unbalanced pattern at ".concat(t));if(!f)throw new TypeError("Missing pattern at ".concat(t));n.push({type:"PATTERN",index:t,value:f}),t=r;continue}n.push({type:"CHAR",index:t,value:e[t++]})}return n.push({type:"END",index:t,value:""}),n}function ce(e,n){n===void 0&&(n={});for(var t=ie(e),a=n.prefixes,o=a===void 0?"./":a,r="[^".concat(T(n.delimiter||"/#?"),"]+?"),i=[],m=0,f=0,s="",u=function(l){if(f<t.length&&t[f].type===l)return t[f++].value},g=function(l){var x=u(l);if(x!==void 0)return x;var S=t[f],O=S.type,P=S.index;throw new TypeError("Unexpected ".concat(O," at ").concat(P,", expected ").concat(l))},R=function(){for(var l="",x;x=u("CHAR")||u("ESCAPED_CHAR");)l+=x;return l};f<t.length;){var v=u("CHAR"),E=u("NAME"),y=u("PATTERN");if(E||y){var p=v||"";o.indexOf(p)===-1&&(s+=p,p=""),s&&(i.push(s),s=""),i.push({name:E||m++,prefix:p,suffix:"",pattern:y||r,modifier:u("MODIFIER")||""});continue}var d=v||u("ESCAPED_CHAR");if(d){s+=d;continue}s&&(i.push(s),s="");var C=u("OPEN");if(C){var p=R(),A=u("NAME")||"",c=u("PATTERN")||"",w=R();g("CLOSE"),i.push({name:A||(c?m++:""),pattern:A&&!c?r:c,prefix:p,suffix:w,modifier:u("MODIFIER")||""});continue}g("END")}return i}function ue(e,n){var t=[],a=q(e,t,n);return se(a,t,n)}function se(e,n,t){t===void 0&&(t={});var a=t.decode,o=a===void 0?function(r){return r}:a;return function(r){var i=e.exec(r);if(!i)return!1;for(var m=i[0],f=i.index,s=Object.create(null),u=function(R){if(i[R]===void 0)return"continue";var v=n[R-1];v.modifier==="*"||v.modifier==="+"?s[v.name]=i[R].split(v.prefix+v.suffix).map(function(E){return o(E,v)}):s[v.name]=o(i[R],v)},g=1;g<i.length;g++)u(g);return{path:m,index:f,params:s}}}function T(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function j(e){return e&&e.sensitive?"":"i"}function fe(e,n){if(!n)return e;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,o=t.exec(e.source);o;)n.push({name:o[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),o=t.exec(e.source);return e}function ve(e,n,t){var a=e.map(function(o){return q(o,n,t).source});return new RegExp("(?:".concat(a.join("|"),")"),j(t))}function de(e,n,t){return le(ce(e,t),n,t)}function le(e,n,t){t===void 0&&(t={});for(var a=t.strict,o=a===void 0?!1:a,r=t.start,i=r===void 0?!0:r,m=t.end,f=m===void 0?!0:m,s=t.encode,u=s===void 0?function(P){return P}:s,g=t.delimiter,R=g===void 0?"/#?":g,v=t.endsWith,E=v===void 0?"":v,y="[".concat(T(E),"]|$"),p="[".concat(T(R),"]"),d=i?"^":"",C=0,A=e;C<A.length;C++){var c=A[C];if(typeof c=="string")d+=T(u(c));else{var w=T(u(c.prefix)),l=T(u(c.suffix));if(c.pattern)if(n&&n.push(c),w||l)if(c.modifier==="+"||c.modifier==="*"){var x=c.modifier==="*"?"?":"";d+="(?:".concat(w,"((?:").concat(c.pattern,")(?:").concat(l).concat(w,"(?:").concat(c.pattern,"))*)").concat(l,")").concat(x)}else d+="(?:".concat(w,"(").concat(c.pattern,")").concat(l,")").concat(c.modifier);else c.modifier==="+"||c.modifier==="*"?d+="((?:".concat(c.pattern,")").concat(c.modifier,")"):d+="(".concat(c.pattern,")").concat(c.modifier);else d+="(?:".concat(w).concat(l,")").concat(c.modifier)}}if(f)o||(d+="".concat(p,"?")),d+=t.endsWith?"(?=".concat(y,")"):"$";else{var S=e[e.length-1],O=typeof S=="string"?p.indexOf(S[S.length-1])>-1:S===void 0;o||(d+="(?:".concat(p,"(?=").concat(y,"))?")),O||(d+="(?=".concat(p,"|").concat(y,")"))}return new RegExp(d,j(t))}function q(e,n,t){return e instanceof RegExp?fe(e,n):Array.isArray(e)?ve(e,n,t):de(e,n,t)}const he=(e,n)=>{for(const t of n){const o=ue(t.path,{decode:decodeURIComponent})(e);if(o)return{route:t,params:o.params}}return null},Re=H(h(e=>{V();const n=$(),t=F({});b(ne,t);let a;const o=he(n.pathname,e.routes);return o?(M(h(()=>{const[r,i]=_();Object.assign(i,r.params)},"Router_component_useTask_h47cPYCz6o4",[o,t])),a=o.route.component,N(a,null,3,"sF_0")):(a=e.defaultComponent,a?N(a,null,3,"sF_1"):N(Y,null,3,"sF_2"))},"Router_component_9bR0NOy4J4o"));export{ge as L,Re as R,pe as i};
